#!/bin/sh

echo "============================="
echo "GENERATING LEXERS AND PARSERS"
echo "============================="
# Compile fileutil first because generate.erl depends on it.
cd ./lib/utilities-1.0/src/
erlc fileutil.erl
mv fileutil.beam ../ebin/
cd ../../../
# Generate lexers and parsers.
cd ./priv/muin/
erlc generate.erl
erl -noshell -s generate gen -s init stop
cd ../../

echo
echo "======================"
echo "COMPILING BUILD SCRIPT"
echo "======================"
erlc -o ebin src/compile_code.erl

echo
echo "================"
echo "    BUILDING    "
echo "================"
cd ebin
erl -pa ebin -noshell -s compile_code -s init stop
