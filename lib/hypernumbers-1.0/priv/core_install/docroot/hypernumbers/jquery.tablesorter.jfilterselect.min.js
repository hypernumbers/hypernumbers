$.tablesorter.addWidget({id:"jFilterSelect",format:function(b){var a=this;var c=$(b);var d=c.attr("id");if(d==false){d="jFTable-"+Math.round(Math.random()*10000);c.attr("id",d)}if($("#filter-column-"+d+"-0").length==0){$("th",c).each(function(k,i){$(i).append('<span id="filter-column-'+d+"-"+k+'"></span>');if($(i).attr("jFilterSelect")==1){var h=$("#filter-column-"+d+"-"+k);h.append('<select id="filter-select-for-'+d+"-column-"+k+'"></select>');h.append('<input id="filter-input-for-'+d+"-column-"+k+'" type="text" size="10" />');var g=['<option value="(All)">(Select All)</option>'];var j=[];$("td:nth-child("+(k+1)+")",c).each(function(e,l){var f=$(l).text();if((j.length<16)&&($.inArray(f,j)<0)){g[g.length]='<option value="'+f+'">'+((f=="")?"(Blank)":f)+"</option>";j[j.length]=f}});if(j.length>=16){$("#filter-select-for-"+d+"-column-"+k).remove()}else{$("#filter-select-for-"+d+"-column-"+k).html(g.join("")).bind("click",function(e){e.stopPropagation()});$("#filter-select-for-"+d+"-column-"+k).html(g.join("")).bind("change",function(e){a.jFilterRun(b)})}$("#filter-input-for-"+d+"-column-"+k).bind("keyup",function(e){a.jFilterRun(b)});$("#filter-input-for-"+d+"-column-"+k).bind("click",function(e){e.stopPropagation();$("#filter-input-for-"+d+"-column-"+k).focus()})}})}},jFilterRun:function(a){$("tbody tr:hidden",a).show();$("tbody tr",$(a)).each(function(c,b){$("td",$(b)).each(function(e,g){$(g).attr("passFilter",true);var d=$("#filter-select-for-"+$(a).attr("id")+"-column-"+e);if((d.length)&&(d.val()!="(All)")){$(g).attr("passFilter",($(g).text()==d.val()))}else{var h=$("#filter-input-for-"+$(a).attr("id")+"-column-"+e);if(h.length>0){$(g).attr("passFilter",$(g).text().toLowerCase().indexOf(h.val().toLowerCase())!=-1)}}});if($("td",$(b)).length==$('td[passFilter="true"]',$(b)).length){$(b).show()}else{$(b).hide()}})}});