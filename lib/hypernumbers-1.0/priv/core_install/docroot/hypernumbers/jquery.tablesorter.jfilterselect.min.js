$.tablesorter.addWidget({id:"jFilterSelect",format:function(b){var a=this;var c=$(b);var d=c.attr("id");if(d==false){d="jFTable-"+Math.round(Math.random()*10000);c.attr("id",d)}if($("#filters-for-"+d).length==0&&$('th[jFilterSelect="1"]').length>0){$("thead tr",c).after('<tr id="filters-for-'+d+'"></tr>');$("th",c).each(function(i,g){$("#filters-for-"+d).append('<th id="filter-column-'+d+"-"+i+'">Filter </th>');if($(g).attr("jFilterSelect")==1){$("#filter-column-"+d+"-"+i).append('<select id="filter-select-for-'+d+"-column-"+i+'"></select>');$("#filter-column-"+d+"-"+i).append('<input id="filter-input-for-'+d+"-column-"+i+'" type="text" size="10" />');var f=['<option value="(All)">(Select All)</option>'];var h=[];$("td:nth-child("+(i+1)+")",c).each(function(e,k){var j=$(k).text();if((h.length<16)&&($.inArray(j,h)<0)){f[f.length]='<option value="'+j+'">'+((j=="")?"(Blank)":j)+"</option>";h[h.length]=j}});if(h.length>=16){$("#filter-select-for-"+d+"-column-"+i).remove()}else{$("#filter-select-for-"+d+"-column-"+i).html(f.join("")).bind("change",function(e){a.jFilterRun(b)})}$("#filter-input-for-"+d+"-column-"+i).bind("keyup",function(e){a.jFilterRun(b)})}})}},jFilterRun:function(a){$("tbody tr:hidden",a).show();$("tbody tr",$(a)).each(function(c,b){$("td",$(b)).each(function(e,g){$(g).attr("passFilter",true);var d=$("#filter-select-for-"+$(a).attr("id")+"-column-"+e);if((d.length)&&(d.val()!="(All)")){$(g).attr("passFilter",($(g).text()==d.val()))}else{var h=$("#filter-input-for-"+$(a).attr("id")+"-column-"+e);if(h.length>0){$(g).attr("passFilter",$(g).text().toLowerCase().indexOf(h.val().toLowerCase())!=-1)}}});if($("td",$(b)).length==$('td[passFilter="true"]',$(b)).length){$(b).show()}else{$(b).hide()}})}});