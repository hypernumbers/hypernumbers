<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head><title>/home/dale/Desktop/hypernumbers/tests/system_test/permission_test_SUITE.erl</title></head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
    1:<i>%%%-----------------------------------------------------------------------------</i>
    2:<i>%%% File    : API_test_SUITE.erl</i>
    3:<i>%%% Author  : Gordon Guthrie &lt;gordonguthrie@localhost&gt;</i>
    4:<i>%%% Description :</i>
    5:<i>%%%</i>
    6:<i>%%% Created : 20 Oct 2007 by Gordon Guthrie &lt;gordonguthrie@localhost&gt;</i>
    7:<i>%%%-----------------------------------------------------------------------------</i>
    8:-<b>module</b>(permission_test_SUITE).
    9:
<a name="10"></a>   10:<i>%% Note: This directive should only be used in test suites.</i>
   11:-<b>compile</b>(export_all).
   12:
   13:-<b>include</b>("ct.hrl").
   14:-<b>include</b>("../../include/spriki.hrl").
   15:
   16:<i>%% Test server callback functions</i>
   17:<i>%%------------------------------------------------------------------------------</i>
<a name=init_per_suite>   18:<b>init_per_suite</b></a>(Config) -&gt;
   19:    io:format("~p~n",[Config]),
<a name="20"></a>   20:    code:add_path("../../../ebin"),
   21:    production_boot:start(),
   22:    Config.
   23:
<a name=end_per_suite>   24:<b>end_per_suite</b></a>(_Config) -&gt;
   25:    production_boot:stop(),
   26:    ok.
   27:
<a name=init_per_testcase>   28:<b>init_per_testcase</b></a>(_TestCase, Config) -&gt; bits:clear_db(),Config.
<a name=end_per_testcase>   29:<b>end_per_testcase</b></a>(_TestCase, _Config) -&gt; ok.
<a name="30"></a>   30:
<a name=all>   31:<b>all</b></a>() -&gt;
   32:    [write_perm,get_perm,get_perm2,get_perm3].
   33:
   34:<i>%% Test cases starts here.</i>
   35:<i>%%------------------------------------------------------------------------------</i>
<a name=write_perm>   36:<b>write_perm</b></a>() -&gt; 
   37:    [{userdata,[{doc,"Set /private to be private"}]}].
<a name=write_perm>   38:<b>write_perm</b></a>(Config) when is_list(Config) -&gt; 
   39:    test_util:expected("Error: unauthorised",
<a name="40"></a>   40:        hn_util:post(?HN_URL1++"/private/",
   41:        "action=create&amp;gui=spriki.swf&amp;name=private&amp;public=false")).
   42:
<a name=get_perm>   43:<b>get_perm</b></a>() -&gt;     
   44:    [{userdata,[{doc,"Set /private to be private"}]}].
<a name=get_perm>   45:<b>get_perm</b></a>(Config) when is_list(Config) -&gt; 
   46:    hn_util:post(?HN_URL1++"/private/",
   47:        "action=create&amp;gui=spriki.swf&amp;name=private&amp;public=false"),
   48:    test_util:expected("Error: unauthorised",
   49:        hn_util:req(?HN_URL1++"/private/a1")).
<a name="50"></a>   50:
<a name=get_perm2>   51:<b>get_perm2</b></a>() -&gt; 
   52:    [{userdata,[{doc,"Set /private to be private"}]}].
<a name=get_perm2>   53:<b>get_perm2</b></a>(Config) when is_list(Config) -&gt; 
   54:    hn_util:post(?HN_URL1++"/private/",
   55:        "action=create&amp;gui=spriki.swf&amp;name=private&amp;public=false"),
   56:    test_util:expected("Error: unauthorised",
   57:        hn_util:req(?HN_URL1++"/private/nested/a1")).
   58:
<a name=get_perm3>   59:<b>get_perm3</b></a>() -&gt;
<a name="60"></a>   60:    [{userdata,[{doc,"Set /private to be private"}]}].
<a name=get_perm3>   61:<b>get_perm3</b></a>(Config) when is_list(Config) -&gt; 
   62:    hn_util:post(?HN_URL1++"/private/",
   63:        "action=create&amp;gui=spriki.swf&amp;name=private&amp;public=false"),
   64:    test_util:expected("0",hn_util:req(?HN_URL1++"/a1")).
</pre>
<hr size=1><i>The transformation of this file (65 lines) took 0.00 seconds</i><br>
</body>
</html>
