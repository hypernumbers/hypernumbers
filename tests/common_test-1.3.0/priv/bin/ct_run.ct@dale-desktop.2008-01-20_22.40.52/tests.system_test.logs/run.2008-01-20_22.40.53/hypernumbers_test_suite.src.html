<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head><title>/home/dale/Desktop/hypernumbers/tests/system_test/hypernumbers_test_SUITE.erl</title></head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
    1:<i>%%%-----------------------------------------------------------------------------</i>
    2:<i>%%% File    : API_test_SUITE.erl</i>
    3:<i>%%% Author  : Gordon Guthrie &lt;gordonguthrie@localhost&gt;</i>
    4:<i>%%% Description :</i>
    5:<i>%%%</i>
    6:<i>%%% Created : 20 Oct 2007 by Gordon Guthrie &lt;gordonguthrie@localhost&gt;</i>
    7:<i>%%%-----------------------------------------------------------------------------</i>
    8:-<b>module</b>(hypernumbers_test_SUITE).
    9:
<a name="10"></a>   10:<i>%% Note: This directive should only be used in test suites.</i>
   11:-<b>compile</b>(export_all).
   12:
   13:-<b>include</b>("ct.hrl").
   14:-<b>include</b>("../../include/spriki.hrl").
   15:
   16:<i>%% Test server callback functions</i>
   17:<i>%%------------------------------------------------------------------------------</i>
<a name=init_per_suite>   18:<b>init_per_suite</b></a>(Config) -&gt;
   19:    code:add_path("/home/dale/Desktop/hypernumbers/ebin"),
<a name="20"></a>   20:    production_boot:start(),
   21:    Config.
   22:
<a name=end_per_suite>   23:<b>end_per_suite</b></a>(_Config) -&gt;
   24:    production_boot:stop(),
   25:    ok.
   26:
<a name=init_per_testcase>   27:<b>init_per_testcase</b></a>(_TestCase, Config) -&gt; bits:clear_db(),Config.
<a name=end_per_testcase>   28:<b>end_per_testcase</b></a>(_TestCase, _Config) -&gt; ok.
   29:
<a name=all><a name="30"></a>   30:<b>all</b></a>() -&gt;
   31:    [hn1,hn2,hn3,hn4,hn5].
   32:
   33:<i>%% Test cases starts here.</i>
   34:<i>%%------------------------------------------------------------------------------</i>
<a name=hn1>   35:<b>hn1</b></a>() -&gt; [{userdata,[{doc,"Description here"}]}].
<a name=hn1>   36:<b>hn1</b></a>(Config) when is_list(Config) -&gt;
   37:    hn_util:post("http://127.0.0.1:9000/a1","action=create&amp;value=99"),
   38:    hn_util:post("http://gordonguthrie.org:9000/a1",
   39:        "action=create&amp;value="++yaws_api:url_encode(
<a name="40"></a>   40:        "=hypernumber(\"http://127.0.0.1:9000/a1?hypernumber\")")),
   41:    test_util:expected("99",hn_util:req("http://gordonguthrie.org:9000/a1")).
   42:
<a name=hn2>   43:<b>hn2</b></a>() -&gt;[{userdata,[{doc,"Description here"}]}].
<a name=hn2>   44:<b>hn2</b></a>(Config) when is_list(Config) -&gt;
   45:    hn_util:post("http://127.0.0.1:9000/a1","action=create&amp;value=99"),
   46:    hn_util:post("http://gordonguthrie.org:9000/a1",
   47:        "action=create&amp;value="++yaws_api:url_encode(
   48:        "=hypernumber(\"http://127.0.0.1:9000/a1?hypernumber\")")),
   49:    hn_util:post("http://127.0.0.1:9000/a1","action=create&amp;value=543"),
<a name="50"></a>   50:    timer:sleep(1000),
   51:    test_util:expected("543",hn_util:req("http://gordonguthrie.org:9000/a1")).
   52:
<a name=hn3>   53:<b>hn3</b></a>() -&gt; [{userdata,[{doc,"Description here"}]}].
<a name=hn3>   54:<b>hn3</b></a>(Config) when is_list(Config) -&gt;
   55:
   56:    hn_util:post("http://127.0.0.1:9000/a1","action=create&amp;value=99"),
   57:    hn_util:post("http://127.0.0.1:9000/a2",
   58:        "action=create&amp;value="++yaws_api:url_encode(
   59:        "=hypernumber(\"http://127.0.0.1:9000/a1?hypernumber\")")),
<a name="60"></a>   60:    hn_util:post("http://gordonguthrie.org:9000/a1",
   61:        "action=create&amp;value="++yaws_api:url_encode(
   62:        "=hypernumber(\"http://127.0.0.1:9000/a1?hypernumber\")")),
   63:    hn_util:post("http://127.0.0.1:9000/a1","action=create&amp;value=543"),
   64:
   65:    timer:sleep(1000),
   66:
   67:    test_util:expected(["543","543"],
   68:        [hn_util:req("http://gordonguthrie.org:9000/a1"),
   69:        hn_util:req("http://127.0.0.1:9000/a2")]).
<a name="70"></a>   70:
<a name=hn4>   71:<b>hn4</b></a>() -&gt; [{userdata,[{doc,"Description here"}]}].
<a name=hn4>   72:<b>hn4</b></a>(Config) when is_list(Config) -&gt;
   73:
   74:    hn_util:post("http://127.0.0.1:9000/a1","action=create&amp;value=99"),
   75:    hn_util:post("http://gordonguthrie.org:9000/a1",
   76:        "action=create&amp;value="++yaws_api:url_encode(
   77:        "=hypernumber(\"http://127.0.0.1:9000/a1?hypernumber\")")),
   78:    hn_util:post("http://127.0.0.1:9000/a2",
   79:        "action=create&amp;value="++yaws_api:url_encode(
<a name="80"></a>   80:        "=hypernumber(\"http://127.0.0.1:9000/a1?hypernumber\")")),
   81:    hn_util:post("http://127.0.0.1:9000/a1","action=create&amp;value=543"),
   82:
   83:    timer:sleep(1000),
   84:
   85:    test_util:expected(["543","543"],
   86:        [hn_util:req("http://gordonguthrie.org:9000/a1"),
   87:        hn_util:req("http://127.0.0.1:9000/a2")]).
   88:
<a name=hn5>   89:<b>hn5</b></a>() -&gt;  [{userdata,[{doc,"Description here"}]}].
<a name=hn5><a name="90"></a>   90:<b>hn5</b></a>(Config) when is_list(Config) -&gt;
   91:
   92:    hn_util:post("http://127.0.0.1:9000/a1","action=create&amp;value=99"),
   93:    hn_util:post("http://gordonguthrie.org:9000/a1",
   94:        "action=create&amp;value="++yaws_api:url_encode(
   95:        "=hypernumber(\"http://127.0.0.1:9000/a1?hypernumber\")")),
   96:    hn_util:post("http://127.0.0.1:9000/a2",
   97:        "action=create&amp;value="++yaws_api:url_encode(
   98:        "=hypernumber(\"http://gordonguthrie.org:9000/a1?hypernumber\")")),
   99:    hn_util:post("http://127.0.0.1:9000/a1","action=create&amp;value=543"),
<a name="100"></a>  100:
  101:    timer:sleep(1000),
  102:
  103:    test_util:expected(["543","543"],
  104:        [hn_util:req("http://gordonguthrie.org:9000/a1"),
  105:        hn_util:req("http://127.0.0.1:9000/a2")]).
</pre>
<hr size=1><i>The transformation of this file (106 lines) took 0.01 seconds</i><br>
</body>
</html>
