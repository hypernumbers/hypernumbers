<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head><title>/home/dale/Desktop/hypernumbers/tests/system_test/permission_test_SUITE.erl</title></head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
    1:<i>%%%-----------------------------------------------------------------------------</i>
    2:<i>%%% File    : API_test_SUITE.erl</i>
    3:<i>%%% Author  : Gordon Guthrie &lt;gordonguthrie@localhost&gt;</i>
    4:<i>%%% Description :</i>
    5:<i>%%%</i>
    6:<i>%%% Created : 20 Oct 2007 by Gordon Guthrie &lt;gordonguthrie@localhost&gt;</i>
    7:<i>%%%-----------------------------------------------------------------------------</i>
    8:-<b>module</b>(permission_test_SUITE).
    9:
<a name="10"></a>   10:<i>%% Note: This directive should only be used in test suites.</i>
   11:-<b>compile</b>(export_all).
   12:
   13:-<b>include</b>("ct.hrl").
   14:-<b>include</b>("../../include/spriki.hrl").
   15:
   16:<i>%% Test server callback functions</i>
   17:<i>%%------------------------------------------------------------------------------</i>
<a name=init_per_suite>   18:<b>init_per_suite</b></a>(Config) -&gt;
   19:    code:add_path("../../../../ebin"),
<a name="20"></a>   20:    production_boot:start(),
   21:    Config.
   22:
<a name=end_per_suite>   23:<b>end_per_suite</b></a>(_Config) -&gt;
   24:    production_boot:stop(),
   25:    ok.
   26:
<a name=init_per_testcase>   27:<b>init_per_testcase</b></a>(_TestCase, Config) -&gt; bits:clear_db(),Config.
<a name=end_per_testcase>   28:<b>end_per_testcase</b></a>(_TestCase, _Config) -&gt; ok.
   29:
<a name=all><a name="30"></a>   30:<b>all</b></a>() -&gt;
   31:    [write_perm,get_perm,get_perm2,get_perm3].
   32:
   33:<i>%% Test cases starts here.</i>
   34:<i>%%------------------------------------------------------------------------------</i>
<a name=write_perm>   35:<b>write_perm</b></a>() -&gt; 
   36:    [{userdata,[{doc,"Set /private to be private"}]}].
<a name=write_perm>   37:<b>write_perm</b></a>(Config) when is_list(Config) -&gt; 
   38:    test_util:expected("Error: unauthorised",
   39:        hn_util:post(?HN_URL1++"/private/",
<a name="40"></a>   40:        "action=create&amp;gui=spriki.swf&amp;name=private&amp;public=false")).
   41:
<a name=get_perm>   42:<b>get_perm</b></a>() -&gt;     
   43:    [{userdata,[{doc,"Set /private to be private"}]}].
<a name=get_perm>   44:<b>get_perm</b></a>(Config) when is_list(Config) -&gt; 
   45:    hn_util:post(?HN_URL1++"/private/",
   46:        "action=create&amp;gui=spriki.swf&amp;name=private&amp;public=false"),
   47:    test_util:expected("Error: unauthorised",
   48:        hn_util:req(?HN_URL1++"/private/a1")).
   49:
<a name=get_perm2><a name="50"></a>   50:<b>get_perm2</b></a>() -&gt; 
   51:    [{userdata,[{doc,"Set /private to be private"}]}].
<a name=get_perm2>   52:<b>get_perm2</b></a>(Config) when is_list(Config) -&gt; 
   53:    hn_util:post(?HN_URL1++"/private/",
   54:        "action=create&amp;gui=spriki.swf&amp;name=private&amp;public=false"),
   55:    test_util:expected("Error: unauthorised",
   56:        hn_util:req(?HN_URL1++"/private/nested/a1")).
   57:
<a name=get_perm3>   58:<b>get_perm3</b></a>() -&gt;
   59:    [{userdata,[{doc,"Set /private to be private"}]}].
<a name=get_perm3><a name="60"></a>   60:<b>get_perm3</b></a>(Config) when is_list(Config) -&gt; 
   61:    hn_util:post(?HN_URL1++"/private/",
   62:        "action=create&amp;gui=spriki.swf&amp;name=private&amp;public=false"),
   63:    test_util:expected("0",hn_util:req(?HN_URL1++"/a1")).
</pre>
<hr size=1><i>The transformation of this file (64 lines) took 0.00 seconds</i><br>
</body>
</html>
