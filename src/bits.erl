%%%-------------------------------------------------------------------
%%% @author    Gordon Guthrie
%%% @copyright (C) 2009, Hypernumbers.com
%%% @doc       This module really shouldn't be here - it is a scratch
%%%            debugging module (hence the name!).
%%% @private
-module(bits).
-export([
         scratch_delete_sites/1,
         init_memory_trace/0,
         mem_csv/0,
         basic_views/0,
        log/1]).                

scratch_delete_site(hypernumbers) ->
    Sites = [
             "http://ab22.tiny.hn:80",
             "http://ad01.tiny.hn:80",
             "http://ag30.tiny.hn:80",
             "http://aj88.tiny.hn:80",
             "http://aq61.tiny.hn:80",
             "http://at76.tiny.hn:80",
             "http://bd47.tiny.hn:80",
             "http://bf64.tiny.hn:80",
             "http://bl01.tiny.hn:80",
             "http://bp93.tiny.hn:80",
             "http://bu99.tiny.hn:80",
             "http://bz01.tiny.hn:80",
             "http://bz24.tiny.hn:80",
             "http://ca69.tiny.hn:80",
             "http://cb09.tiny.hn:80",
             "http://cb53.tiny.hn:80",
             "http://cf37.tiny.hn:80",
             "http://ci22.tiny.hn:80",
             "http://cj81.tiny.hn:80",
             "http://cj85.tiny.hn:80",
             "http://cl57.tiny.hn:80",
             "http://cy89.tiny.hn:80",
             "http://dc56.tiny.hn:80",
             "http://de91.tiny.hn:80",
             "http://df48.tiny.hn:80",
             "http://do10.tiny.hn:80",
             "http://dr93.tiny.hn:80",
             "http://ds15.tiny.hn:80",
             "http://dw62.tiny.hn:80",
             "http://dw65.tiny.hn:80",
             "http://ed06.tiny.hn:80",
             "http://ee52.tiny.hn:80",
             "http://ef96.tiny.hn:80",
             "http://eg85.tiny.hn:80",
             "http://en70.tiny.hn:80",
             "http://eo06.tiny.hn:80",
             "http://er62.tiny.hn:80",
             "http://es35.tiny.hn:80",
             "http://et14.tiny.hn:80",
             "http://fa89.tiny.hn:80",
             "http://fj73.tiny.hn:80",
             "http://fp11.tiny.hn:80",
             "http://ft54.tiny.hn:80",
             "http://fu43.tiny.hn:80",
             "http://fu72.tiny.hn:80",
             "http://fx20.tiny.hn:80",
             "http://fx27.tiny.hn:80",
             "http://fx59.tiny.hn:80",
             "http://ga98.tiny.hn:80",
             "http://gh91.tiny.hn:80",
             "http://gk67.tiny.hn:80",
             "http://gl40.tiny.hn:80",
             "http://gm90.tiny.hn:80",
             "http://gr06.tiny.hn:80",
             "http://ha78.tiny.hn:80",
             "http://hd91.tiny.hn:80",
             "http://hk33.tiny.hn:80",
             "http://hu07.tiny.hn:80",
             "http://hv63.tiny.hn:80",
             "http://hy81.tiny.hn:80",
             "http://id00.tiny.hn:80",
             "http://ii42.tiny.hn:80",
             "http://ik59.tiny.hn:80",
             "http://is18.tiny.hn:80",
             "http://it73.tiny.hn:80",
             "http://iu86.tiny.hn:80",
             "http://iv46.tiny.hn:80",
             "http://iy54.tiny.hn:80",
             "http://iz72.tiny.hn:80",
             "http://jj38.tiny.hn:80",
             "http://jm29.tiny.hn:80",
             "http://jp22.tiny.hn:80",
             "http://jp50.tiny.hn:80",
             "http://jr99.tiny.hn:80",
             "http://kd97.tiny.hn:80",
             "http://kg75.tiny.hn:80",
             "http://kl21.tiny.hn:80",
             "http://ko22.tiny.hn:80",
             "http://ko27.tiny.hn:80",
             "http://kr46.tiny.hn:80",
             "http://lg33.tiny.hn:80",
             "http://lt83.tiny.hn:80",
             "http://mh14.tiny.hn:80",
             "http://mi61.tiny.hn:80",
             "http://mj43.tiny.hn:80",
             "http://mo85.tiny.hn:80",
             "http://mw70.tiny.hn:80",
             "http://nb64.tiny.hn:80",
             "http://nc30.tiny.hn:80",
             "http://nf86.tiny.hn:80",
             "http://nj40.tiny.hn:80",
             "http://nr22.tiny.hn:80",
             "http://oa84.tiny.hn:80",
             "http://oc63.tiny.hn:80",
             "http://oh22.tiny.hn:80",
             "http://oo41.tiny.hn:80",
             "http://oo69.tiny.hn:80",
             "http://op02.tiny.hn:80",
             "http://ou89.tiny.hn:80",
             "http://ow58.tiny.hn:80",
             "http://pc80.tiny.hn:80",
             "http://pq67.tiny.hn:80",
             "http://pt19.tiny.hn:80",
             "http://pz35.tiny.hn:80",
             "http://qn43.tiny.hn:80",
             "http://qo60.tiny.hn:80",
             "http://qt38.tiny.hn:80",
             "http://qt43.tiny.hn:80",
             "http://qy63.tiny.hn:80",
             "http://re31.tiny.hn:80",
             "http://rk87.tiny.hn:80",
             "http://rm09.tiny.hn:80",
             "http://rp52.tiny.hn:80",
             "http://rr27.tiny.hn:80",
             "http://rz15.tiny.hn:80",
             "http://sd08.tiny.hn:80",
             "http://so42.tiny.hn:80",
             "http://sp01.tiny.hn:80",
             "http://support.hypernumbers.com:80",
             "http://td79.tiny.hn:80",
             "http://tf13.tiny.hn:80",
             "http://tg24.tiny.hn:80",
             "http://to75.tiny.hn:80",
             "http://to79.tiny.hn:80",
             "http://translate.hypernumbers.com:80",
             "http://tu47.tiny.hn:80",
             "http://tv12.tiny.hn:80",
             "http://uc28.tiny.hn:80",
             "http://ue81.tiny.hn:80",
             "http://ui08.tiny.hn:80",
             "http://uk38.tiny.hn:80",
             "http://ut38.tiny.hn:80",
             "http://ux86.tiny.hn:80",
             "http://vc53.tiny.hn:80",
             "http://vd50.tiny.hn:80",
             "http://vd83.tiny.hn:80",
             "http://vn44.tiny.hn:80",
             "http://vv84.tiny.hn:80",
             "http://vw21.tiny.hn:80",
             "http://vz75.tiny.hn:80",
             "http://we74.tiny.hn:80",
             "http://wn17.tiny.hn:80",
             "http://wz57.tiny.hn:80",
             "http://xi07.tiny.hn:80",
             "http://xk32.tiny.hn:80",
             "http://xn70.tiny.hn:80",
             "http://xo71.tiny.hn:80",
             "http://xx15.tiny.hn:80",
             "http://yc48.tiny.hn:80",
             "http://yg40.tiny.hn:80",
             "http://yh51.tiny.hn:80",
             "http://yq84.tiny.hn:80",
             "http://ys23.tiny.hn:80",
             "http://yv01.tiny.hn:80",
             "http://yw08.tiny.hn:80",
             "http://za39.tiny.hn:80"
            ],
    [ok = hn_setup:delete_site(X) || X <- Sites];
scratch_delete_site(node2) ->
    Sites = [
             "http://ab62.tiny.hn:80",
             "http://ae36.tiny.hn:80",
             "http://am17.tiny.hn:80",
             "http://am43.tiny.hn:80",
             "http://ao93.tiny.hn:80",
             "http://ap77.tiny.hn:80",
             "http://ar31.tiny.hn:80",
             "http://at34.tiny.hn:80",
             "http://ay54.tiny.hn:80",
             "http://bi88.tiny.hn:80",
             "http://bj35.tiny.hn:80",
             "http://bo74.tiny.hn:80",
             "http://br79.tiny.hn:80",
             "http://ca26.tiny.hn:80",
             "http://cd70.tiny.hn:80",
             "http://cf70.tiny.hn:80",
             "http://cm81.tiny.hn:80",
             "http://cn39.tiny.hn:80",
             "http://cp40.tiny.hn:80",
             "http://cs48.tiny.hn:80",
             "http://ct11.tiny.hn:80",
             "http://cu66.tiny.hn:80",
             "http://cu93.tiny.hn:80",
             "http://cv83.tiny.hn:80",
             "http://cv96.tiny.hn:80",
             "http://cz74.tiny.hn:80",
             "http://dd50.tiny.hn:80",
             "http://de71.tiny.hn:80",
             "http://de97.tiny.hn:80",
             "http://df44.tiny.hn:80",
             "http://dn18.tiny.hn:80",
             "http://dv87.tiny.hn:80",
             "http://dy94.tiny.hn:80",
             "http://dz82.tiny.hn:80",
             "http://eg03.tiny.hn:80",
             "http://ei46.tiny.hn:80",
             "http://el91.tiny.hn:80",
             "http://em85.tiny.hn:80",
             "http://ew83.tiny.hn:80",
             "http://ez65.tiny.hn:80",
             "http://fe27.tiny.hn:80",
             "http://fi31.tiny.hn:80",
             "http://fv16.tiny.hn:80",
             "http://fw44.tiny.hn:80",
             "http://fy50.tiny.hn:80",
             "http://gl55.tiny.hn:80",
             "http://gu34.tiny.hn:80",
             "http://gu53.tiny.hn:80",
             "http://gw91.tiny.hn:80",
             "http://ha58.tiny.hn:80",
             "http://hb62.tiny.hn:80",
             "http://hc41.tiny.hn:80",
             "http://hf02.tiny.hn:80",
             "http://ho02.tiny.hn:80",
             "http://hp37.tiny.hn:80",
             "http://ic96.tiny.hn:80",
             "http://id20.tiny.hn:80",
             "http://il50.tiny.hn:80",
             "http://in32.tiny.hn:80",
             "http://iq97.tiny.hn:80",
             "http://ir61.tiny.hn:80",
             "http://it62.tiny.hn:80",
             "http://jb74.tiny.hn:80",
             "http://jc26.tiny.hn:80",
             "http://jd24.tiny.hn:80",
             "http://jp29.tiny.hn:80",
             "http://js61.tiny.hn:80",
             "http://jv68.tiny.hn:80",
             "http://kd92.tiny.hn:80",
             "http://ke80.tiny.hn:80",
             "http://kg56.tiny.hn:80",
             "http://kh15.tiny.hn:80",
             "http://kj17.tiny.hn:80",
             "http://kl13.tiny.hn:80",
             "http://ko85.tiny.hn:80",
             "http://kp16.tiny.hn:80",
             "http://kq96.tiny.hn:80",
             "http://kw78.tiny.hn:80",
             "http://ky63.tiny.hn:80",
             "http://la73.tiny.hn:80",
             "http://ld22.tiny.hn:80",
             "http://le30.tiny.hn:80",
             "http://lg50.tiny.hn:80",
             "http://lg55.tiny.hn:80",
             "http://lg72.tiny.hn:80",
             "http://li63.tiny.hn:80",
             "http://ln24.tiny.hn:80",
             "http://ln36.tiny.hn:80",
             "http://lq71.tiny.hn:80",
             "http://lu12.tiny.hn:80",
             "http://lv59.tiny.hn:80",
             "http://lv77.tiny.hn:80",
             "http://lw72.tiny.hn:80",
             "http://mj86.tiny.hn:80",
             "http://ml55.tiny.hn:80",
             "http://mt84.tiny.hn:80",
             "http://mu35.tiny.hn:80",
             "http://mv69.tiny.hn:80",
             "http://mw58.tiny.hn:80",
             "http://mx11.tiny.hn:80",
             "http://nb72.tiny.hn:80",
             "http://nd19.tiny.hn:80",
             "http://nf24.tiny.hn:80",
             "http://ng92.tiny.hn:80",
             "http://ni60.tiny.hn:80",
             "http://nj23.tiny.hn:80",
             "http://nj49.tiny.hn:80",
             "http://nk71.tiny.hn:80",
             "http://no36.tiny.hn:80",
             "http://no61.tiny.hn:80",
             "http://nq03.tiny.hn:80",
             "http://nq71.tiny.hn:80",
             "http://nu88.tiny.hn:80",
             "http://nv41.tiny.hn:80",
             "http://oc26.tiny.hn:80",
             "http://of15.tiny.hn:80",
             "http://oi72.tiny.hn:80",
             "http://ol07.tiny.hn:80",
             "http://ol99.tiny.hn:80",
             "http://om68.tiny.hn:80",
             "http://op01.tiny.hn:80",
             "http://or54.tiny.hn:80",
             "http://oy84.tiny.hn:80",
             "http://pi44.tiny.hn:80",
             "http://pl62.tiny.hn:80",
             "http://pn03.tiny.hn:80",
             "http://pn84.tiny.hn:80",
             "http://pr54.tiny.hn:80",
             "http://qh93.tiny.hn:80",
             "http://qj49.tiny.hn:80",
             "http://qq38.tiny.hn:80",
             "http://qz09.tiny.hn:80",
             "http://rb53.tiny.hn:80",
             "http://rf99.tiny.hn:80",
             "http://rr20.tiny.hn:80",
             "http://sh40.tiny.hn:80",
             "http://si72.tiny.hn:80",
             "http://sj15.tiny.hn:80",
             "http://sl56.tiny.hn:80",
             "http://sp60.tiny.hn:80",
             "http://sq78.tiny.hn:80",
             "http://st32.tiny.hn:80",
             "http://st84.tiny.hn:80",
             "http://su43.tiny.hn:80",
             "http://ta21.tiny.hn:80",
             "http://tb20.tiny.hn:80",
             "http://tb97.tiny.hn:80",
             "http://th75.tiny.hn:80",
             "http://tj19.tiny.hn:80",
             "http://tm97.tiny.hn:80",
             "http://tx82.tiny.hn:80",
             "http://ty97.tiny.hn:80",
             "http://ud81.tiny.hn:80",
             "http://ui65.tiny.hn:80",
             "http://uj31.tiny.hn:80",
             "http://uj37.tiny.hn:80",
             "http://uv58.tiny.hn:80",
             "http://uv94.tiny.hn:80",
             "http://va85.tiny.hn:80",
             "http://vb23.tiny.hn:80",
             "http://ve58.tiny.hn:80",
             "http://vg30.tiny.hn:80",
             "http://vn27.tiny.hn:80",
             "http://vs97.tiny.hn:80",
             "http://we92.tiny.hn:80",
             "http://wg19.tiny.hn:80",
             "http://wk11.tiny.hn:80",
             "http://wq35.tiny.hn:80",
             "http://wq90.tiny.hn:80",
             "http://ws26.tiny.hn:80",
             "http://wx70.tiny.hn:80",
             "http://xc09.tiny.hn:80",
             "http://xc55.tiny.hn:80",
             "http://xh19.tiny.hn:80",
             "http://xh21.tiny.hn:80",
             "http://xj16.tiny.hn:80",
             "http://xu79.tiny.hn:80",
             "http://ym98.tiny.hn:80",
             "http://yp79.tiny.hn:80",
             "http://yr96.tiny.hn:80",
             "http://yt88.tiny.hn:80",
            ],
    [ok = hn_setup:delete_site(X) || X <- Sites];
scratch_delete_site(node3) ->
    Sites = [
             "http://aa38.tiny.hn:80",
             "http://an91.tiny.hn:80",
             "http://as90.tiny.hn:80",
             "http://ax05.tiny.hn:80",
             "http://ay44.tiny.hn:80",
             "http://ba06.tiny.hn:80",
             "http://ba35.tiny.hn:80",
             "http://bc67.tiny.hn:80",
             "http://bk72.tiny.hn:80",
             "http://bm03.tiny.hn:80",
             "http://bn20.tiny.hn:80",
             "http://bn50.tiny.hn:80",
             "http://bp82.tiny.hn:80",
             "http://bs11.tiny.hn:80",
             "http://bv55.tiny.hn:80",
             "http://by50.tiny.hn:80",
             "http://cd20.tiny.hn:80",
             "http://cd56.tiny.hn:80",
             "http://cj07.tiny.hn:80",
             "http://ck63.tiny.hn:80",
             "http://cr51.tiny.hn:80",
             "http://cr97.tiny.hn:80",
             "http://ct37.tiny.hn:80",
             "http://da38.tiny.hn:80",
             "http://da88.tiny.hn:80",
             "http://dm77.tiny.hn:80",
             "http://dr05.tiny.hn:80",
             "http://dr28.tiny.hn:80",
             "http://ea53.tiny.hn:80",
             "http://eh46.tiny.hn:80",
             "http://eh57.tiny.hn:80",
             "http://el87.tiny.hn:80",
             "http://ep51.tiny.hn:80",
             "http://eq41.tiny.hn:80",
             "http://eq61.tiny.hn:80",
             "http://er14.tiny.hn:80",
             "http://er86.tiny.hn:80",
             "http://et70.tiny.hn:80",
             "http://ew97.tiny.hn:80",
             "http://fi20.tiny.hn:80",
             "http://fk29.tiny.hn:80",
             "http://gb02.tiny.hn:80",
             "http://hg79.tiny.hn:80",
             "http://hr72.tiny.hn:80",
             "http://ht08.tiny.hn:80",
             "http://ij15.tiny.hn:80",
             "http://ij93.tiny.hn:80",
             "http://ik65.tiny.hn:80",
             "http://iq16.tiny.hn:80",
             "http://ir04.tiny.hn:80",
             "http://iz02.tiny.hn:80",
             "http://iz83.tiny.hn:80",
             "http://jb31.tiny.hn:80",
             "http://jg96.tiny.hn:80",
             "http://jh62.tiny.hn:80",
             "http://jj23.tiny.hn:80",
             "http://jv59.tiny.hn:80",
             "http://jv98.tiny.hn:80",
             "http://ka29.tiny.hn:80",
             "http://ka80.tiny.hn:80",
             "http://kd53.tiny.hn:80",
             "http://kd55.tiny.hn:80",
             "http://kd72.tiny.hn:80",
             "http://ke09.tiny.hn:80",
             "http://ke44.tiny.hn:80",
             "http://kq08.tiny.hn:80",
             "http://ku13.tiny.hn:80",
             "http://kv69.tiny.hn:80",
             "http://kw14.tiny.hn:80",
             "http://kw83.tiny.hn:80",
             "http://ky38.tiny.hn:80",
             "http://kz87.tiny.hn:80",
             "http://ld11.tiny.hn:80",
             "http://lf77.tiny.hn:80",
             "http://lf91.tiny.hn:80",
             "http://lh42.tiny.hn:80",
             "http://lj23.tiny.hn:80",
             "http://lv65.tiny.hn:80",
             "http://lv91.tiny.hn:80",
             "http://mc61.tiny.hn:80",
             "http://me31.tiny.hn:80",
             "http://me46.tiny.hn:80",
             "http://mh08.tiny.hn:80",
             "http://mh19.tiny.hn:80",
             "http://mk06.tiny.hn:80",
             "http://mo97.tiny.hn:80",
             "http://mp06.tiny.hn:80",
             "http://mp51.tiny.hn:80",
             "http://mq00.tiny.hn:80",
             "http://mq65.tiny.hn:80",
             "http://mw37.tiny.hn:80",
             "http://ne90.tiny.hn:80",
             "http://ne92.tiny.hn:80",
             "http://ng79.tiny.hn:80",
             "http://ni34.tiny.hn:80",
             "http://nl48.tiny.hn:80",
             "http://nq95.tiny.hn:80",
             "http://nw61.tiny.hn:80",
             "http://od71.tiny.hn:80",
             "http://oi36.tiny.hn:80",
             "http://oj15.tiny.hn:80",
             "http://oo39.tiny.hn:80",
             "http://ot63.tiny.hn:80",
             "http://ot74.tiny.hn:80",
             "http://pd51.tiny.hn:80",
             "http://ph41.tiny.hn:80",
             "http://pl06.tiny.hn:80",
             "http://pm98.tiny.hn:80",
             "http://pt97.tiny.hn:80",
             "http://py68.tiny.hn:80",
             "http://qa40.tiny.hn:80",
             "http://qj92.tiny.hn:80",
             "http://qp11.tiny.hn:80",
             "http://qq99.tiny.hn:80",
             "http://qv80.tiny.hn:80",
             "http://qx33.tiny.hn:80",
             "http://rd55.tiny.hn:80",
             "http://re08.tiny.hn:80",
             "http://rg25.tiny.hn:80",
             "http://rq76.tiny.hn:80",
             "http://rq82.tiny.hn:80",
             "http://rt76.tiny.hn:80",
             "http://ru35.tiny.hn:80",
             "http://rv73.tiny.hn:80",
             "http://rv82.tiny.hn:80",
             "http://rx97.tiny.hn:80",
             "http://sb59.tiny.hn:80",
             "http://se03.tiny.hn:80",
             "http://sf02.tiny.hn:80",
             "http://sf09.tiny.hn:80",
             "http://si27.tiny.hn:80",
             "http://sj12.tiny.hn:80",
             "http://sl45.tiny.hn:80",
             "http://so74.tiny.hn:80",
             "http://sp91.tiny.hn:80",
             "http://su87.tiny.hn:80",
             "http://sz06.tiny.hn:80",
             "http://tc61.tiny.hn:80",
             "http://th81.tiny.hn:80",
             "http://tj02.tiny.hn:80",
             "http://tk35.tiny.hn:80",
             "http://tk52.tiny.hn:80",
             "http://tk64.tiny.hn:80",
             "http://tp12.tiny.hn:80",
             "http://tp75.tiny.hn:80",
             "http://ty94.tiny.hn:80",
             "http://tz82.tiny.hn:80",
             "http://ud87.tiny.hn:80",
             "http://ue16.tiny.hn:80",
             "http://up53.tiny.hn:80",
             "http://uq09.tiny.hn:80",
             "http://ut04.tiny.hn:80",
             "http://vb79.tiny.hn:80",
             "http://vc90.tiny.hn:80",
             "http://vd40.tiny.hn:80",
             "http://vf88.tiny.hn:80",
             "http://vk74.tiny.hn:80",
             "http://vp28.tiny.hn:80",
             "http://vx44.tiny.hn:80",
             "http://wc66.tiny.hn:80",
             "http://wg29.tiny.hn:80",
             "http://wl20.tiny.hn:80",
             "http://wm46.tiny.hn:80",
             "http://wn89.tiny.hn:80",
             "http://wp53.tiny.hn:80",
             "http://wx27.tiny.hn:80",
             "http://xd09.tiny.hn:80",
             "http://xe64.tiny.hn:80",
             "http://xi68.tiny.hn:80",
             "http://xj59.tiny.hn:80",
             "http://xj77.tiny.hn:80",
             "http://xl34.tiny.hn:80",
             "http://xl90.tiny.hn:80",
             "http://xm15.tiny.hn:80",
             "http://xm32.tiny.hn:80",
             "http://xs32.tiny.hn:80",
             "http://xs53.tiny.hn:80",
             "http://xt80.tiny.hn:80",
             "http://xx86.tiny.hn:80",
             "http://ya09.tiny.hn:80",
             "http://ye67.tiny.hn:80",
             "http://yl03.tiny.hn:80",
             "http://yl48.tiny.hn:80",
             "http://yr08.tiny.hn:80",
             "http://ys20.tiny.hn:80",
             "http://yt49.tiny.hn:80",
             "http://yt80.tiny.hn:80",
             "http://yu92.tiny.hn:80",
             "http://yy01.tiny.hn:80",
             "http://za37.tiny.hn:80",
             ],
    [ok = hn_setup:delete_site(X) || X <- Sites].

basic_views() ->
    auth_srv2:add_view("http://localhost:9000", [], [everyone], "_g/core/spreadsheet"),
    auth_srv2:set_champion("http://localhost:9000", [], "_g/core/spreadsheet"),
    auth_srv2:add_view("http://localhost:9000", ["[**]"], [everyone], "_g/core/spreadsheet"),
    auth_srv2:set_champion("http://localhost:9000", ["[**]"], "_g/core/spreadsheet").    

init_memory_trace() ->
    File= case os:type() of
	      {win32,nt} -> exit('erk, not on windows...');
	      _          -> "../var/logs/memory.csv"
          end,
    io:format("File is ~p~n", [File]),
    ok = filelib:ensure_dir(File),
    % so shit its not true :(
    ok = file:delete(File),
    ok = filelib:ensure_dir(File),
    log(stringify([time, total, processes, processes_used, system,
                   atom, atom_used, binary, code, ets])).    

mem_csv() ->
    Mem = erlang:memory(),
    Vals = [V || {_K, V} <- Mem],
    io:format("Mem is ~p~nVals is ~p~n", [Mem, Vals]),
    Secs = calendar:datetime_to_gregorian_seconds(erlang:localtime()),
    File = "../logs/memory.csv",
    log(stringify([Secs | Vals]), File).

log(String) ->
    log(String, "../logs/dump.txt").

log(String, File) ->
    _Return=filelib:ensure_dir(File),
    
    case file:open(File, [append]) of
	{ok, Id} ->
	    io:fwrite(Id, "~s~n", [String]),
	    file:close(Id);
	_ ->
	    error
    end.

stringify(List) -> str1(List, []).

str1([], Acc) -> string:join(lists:reverse(Acc), ",");
str1([H | T], Acc) when is_atom(H) ->
    str1(T, ["\"" ++ atom_to_list(H) ++ "\"" | Acc]);
str1([H | T], Acc) when is_integer(H) ->
    str1(T, ["\"" ++ integer_to_list(H) ++ "\"" | Acc]).
